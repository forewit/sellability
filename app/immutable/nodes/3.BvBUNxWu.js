import{c as z,a as l,t as d,b as R,f as we}from"../chunks/DO8NRdVL.js";import{i as Ce}from"../chunks/D1KUTC9j.js";import{f as u,p as C,c as m,n as B,r as _,t as E,a as L,u as Le,g as j,s as $,i as P,j as q,h as b}from"../chunks/BVnJrnjv.js";import{k as de,l as ce,s as F,c as V,a as D,n as ke,m as Ae,C as Ne,h as Se,j as je,I as ne,B as ze,g as Ie}from"../chunks/C790LS5i.js";import{b as ie}from"../chunks/B0sUpEwB.js";import{g as Re}from"../chunks/B9dOItoa.js";import{l as ve,s as ue,p as w,b as M,r as T,i as te,c as g}from"../chunks/ChXPlHul.js";import{C as qe}from"../chunks/CXWAKvu8.js";function Be(n,e){const r=ve(e,["children","$$slots","$$events","$$legacy"]);de(n,ue({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(t,a)=>{var s=z(),o=u(s);ce(o,e,"default",{}),l(t,s)},$$slots:{default:!0}}))}function Ee(n,e){const r=ve(e,["children","$$slots","$$events","$$legacy"]);de(n,ue({name:"terminal"},()=>r,{iconNode:[["polyline",{points:"4 17 10 11 4 5"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19"}]],children:(t,a)=>{var s=z(),o=u(s);ce(o,e,"default",{}),l(t,s)},$$slots:{default:!0}}))}var Fe=d("<p><!></p>");function Ve(n,e){C(e,!0);let r=w(e,"ref",15,null),i=T(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=Fe();let a;var s=m(t);F(s,()=>e.children??B),_(t),M(t,o=>r(o),()=>r()),E(o=>a=D(t,a,{class:o,...i}),[()=>V("text-muted-foreground text-sm",e.class)]),l(n,t),L()}const De=ke({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var Me=d("<div><!></div>");function Te(n,e){C(e,!0);let r=w(e,"ref",15,null),i=w(e,"variant",3,"default"),t=T(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var a=Me();let s;var o=m(a);F(o,()=>e.children??B),_(a),M(a,c=>r(c),()=>r()),E(c=>s=D(a,s,{class:c,...t,role:"alert"}),[()=>V(De({variant:i()}),e.class)]),l(n,a),L()}var We=d("<div><!></div>");function Ge(n,e){C(e,!0);let r=w(e,"ref",15,null),i=T(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=We();let a;var s=m(t);F(s,()=>e.children??B),_(t),M(t,o=>r(o),()=>r()),E(o=>a=D(t,a,{class:o,...i}),[()=>V("text-sm [&_p]:leading-relaxed",e.class)]),l(n,t),L()}var He=d("<div><!></div>");function Je(n,e){C(e,!0);let r=w(e,"ref",15,null),i=w(e,"level",3,5),t=T(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var a=He();let s;var o=m(a);F(o,()=>e.children??B),_(a),M(a,c=>r(c),()=>r()),E(c=>s=D(a,s,{role:"heading","aria-level":i(),class:c,...t}),[()=>V("mb-1 font-medium leading-none tracking-tight",e.class)]),l(n,a),L()}var Ke=d('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),Oe=d("<!> <!>",1),Qe=d("<!> <!> <!>",1),Ue=d("<!> Login",1),Xe=d('<form class="space-y-4"><div class="space-y-2"><!></div> <div class="space-y-2"><!></div> <!> <!></form>'),Ye=d("<!> <!>",1);function Ze(n,e){C(e,!0);const r=Ae();let i=q(""),t=q(""),a=q(!1),s=q(!1);async function o(f){f.preventDefault();try{P(a,!1),P(s,!0),await r.login(b(i),b(t)),e.onSuccessfulLogin()}catch{console.log("Login failed!"),P(a,!0)}finally{P(s,!1)}}Le(()=>{r.user&&e.onSuccessfulLogin()});var c=z(),fe=u(c);{var ge=f=>{var k=Ke();l(f,k)},me=f=>{var k=z(),_e=u(k);g(_e,()=>qe,(he,pe)=>{pe(he,{class:"w-full max-w-sm mx-auto",children:($e,tt)=>{var ae=Ye(),re=u(ae);g(re,()=>Ne,(W,G)=>{G(W,{children:(H,xe)=>{var h=Oe(),x=u(h);g(x,()=>Se,(p,A)=>{A(p,{class:"text-center",children:(y,K)=>{j();var N=R("Login");l(y,N)},$$slots:{default:!0}})});var J=$(x,2);g(J,()=>Ve,(p,A)=>{A(p,{class:"text-center",children:(y,K)=>{j();var N=R("Enter your credentials to sign in");l(y,N)},$$slots:{default:!0}})}),l(H,h)},$$slots:{default:!0}})});var be=$(re,2);g(be,()=>je,(W,G)=>{G(W,{children:(H,xe)=>{var h=Xe(),x=m(h),J=m(x);ne(J,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return b(i)},set value(v){P(i,v,!0)}}),_(x);var p=$(x,2),A=m(p);ne(A,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return b(t)},set value(v){P(t,v,!0)}}),_(p);var y=$(p,2);{var K=v=>{var O=z(),I=u(O);g(I,()=>Te,(Q,U)=>{U(Q,{variant:"destructive",class:"py-2",children:(S,at)=>{var se=Qe(),le=u(se);Ee(le,{class:"size-4"});var oe=$(le,2);g(oe,()=>Je,(X,Y)=>{Y(X,{children:(Z,Pe)=>{j();var ee=R("Wrong password!");l(Z,ee)},$$slots:{default:!0}})});var ye=$(oe,2);g(ye,()=>Ge,(X,Y)=>{Y(X,{children:(Z,Pe)=>{j();var ee=R("Please try again.");l(Z,ee)},$$slots:{default:!0}})}),l(S,se)},$$slots:{default:!0}})}),l(v,O)};te(y,v=>{b(a)&&v(K)})}var N=$(y,2);ze(N,{type:"submit",class:"w-full",get disabled(){return b(s)},children:(v,O)=>{var I=Ue(),Q=u(I);{var U=S=>{Be(S,{class:"mr-2 h-4 w-4 animate-spin"})};te(Q,S=>{b(s)&&S(U)})}j(),l(v,I)},$$slots:{default:!0}}),_(h),we("submit",h,o),l(H,h)},$$slots:{default:!0}})}),l($e,ae)},$$slots:{default:!0}})}),l(f,k)};te(fe,f=>{r.user?f(ge):f(me,!1)})}l(n,c),L()}var et=d('<div class="h-svh grid items-center p-3"><!></div>');function vt(n,e){C(e,!1);const r=Ie();function i(){r.authRedirect===ie+"/login/"&&(r.authRedirect=ie+"/"),Re(r.authRedirect)}Ce();var t=et(),a=m(t);Ze(a,{onSuccessfulLogin:i}),_(t),l(n,t),L()}export{vt as component};
