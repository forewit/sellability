import{c as M,a,t as p,b as C,s as we,e as xe}from"../chunks/DEGKnJZC.js";import{i as Ze}from"../chunks/Dad7ONXQ.js";import{f as _,p as ie,c as T,n as Le,r as V,t as te,a as de,u as ea,s as i,g as x,h as r,j as L,i as e,G as aa}from"../chunks/CwUIB_ns.js";import{I as Be,s as De,m as ta,a as Se,c as Ae,b as Ee,l as ra,C as sa,d as la,j as oa,k as na,B as Y,g as ia}from"../chunks/DuwhLXrj.js";import{b as Ce}from"../chunks/D0XYee8R.js";import{g as da}from"../chunks/qi5unRdS.js";import{l as Ne,s as Fe,p as ne,b as qe,r as Ie,i as z,c as P}from"../chunks/LllUPRky.js";import{C as ca}from"../chunks/DPduvNo8.js";import{I as ae}from"../chunks/D6ANuJUQ.js";import{L as Pe}from"../chunks/Pepjk7ja.js";function ua(w,t){const o=Ne(t,["children","$$slots","$$events","$$legacy"]);Be(w,Fe({name:"mail"},()=>o,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(s,n)=>{var f=M(),u=_(f);De(u,t,"default",{}),a(s,f)},$$slots:{default:!0}}))}function je(w,t){const o=Ne(t,["children","$$slots","$$events","$$legacy"]);Be(w,Fe({name:"triangle-alert"},()=>o,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(s,n)=>{var f=M(),u=_(f);De(u,t,"default",{}),a(s,f)},$$slots:{default:!0}}))}const va=ta({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var fa=p("<div><!></div>");function be(w,t){ie(t,!0);let o=ne(t,"ref",15,null),c=ne(t,"variant",3,"default"),s=Ie(t,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var n=fa();let f;var u=T(n);Se(u,()=>t.children??Le),V(n),qe(n,d=>o(d),()=>o()),te(d=>f=Ee(n,f,{class:d,...s,role:"alert"}),[()=>Ae(va({variant:c()}),t.class)]),a(w,n),de()}var ma=p("<div><!></div>");function ye(w,t){ie(t,!0);let o=ne(t,"ref",15,null),c=Ie(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=ma();let n;var f=T(s);Se(f,()=>t.children??Le),V(s),qe(s,u=>o(u),()=>o()),te(u=>n=Ee(s,n,{class:u,...c}),[()=>Ae("text-sm [&_p]:leading-relaxed",t.class)]),a(w,s),de()}var _a=p("<div><!></div>");function ke(w,t){ie(t,!0);let o=ne(t,"ref",15,null),c=ne(t,"level",3,5),s=Ie(t,["$$slots","$$events","$$legacy","ref","class","level","children"]);var n=_a();let f;var u=T(n);Se(u,()=>t.children??Le),V(n),qe(n,d=>o(d),()=>o()),te(d=>f=Ee(n,f,{role:"heading","aria-level":c(),class:d,...s}),[()=>Ae("mb-1 font-medium leading-none tracking-tight",t.class)]),a(w,n),de()}var pa=p('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),ga=p('<img class="w-24" alt="logo"> <!>',1),ha=p("<!> <!> <!>",1),$a=p("<!> ",1),wa=p('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),xa=p("<!> <!> <!>",1),Pa=p("<!> Create account",1),ba=p('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!></form>'),ya=p("<!> <!> <!>",1),ka=p("<!> Login",1),Ca=p('<form class="flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-between"><!> <!></div></form>'),La=p("<!> <!>",1);function Sa(w,t){ie(t,!0);const o=ra();let c=L(""),s=L(""),n=L(""),f=L(!1),u=L(!1),d=L(!1),ue=L(!1),G=L(""),R=L(""),Z=L(!1),ve=L(!1);function fe(m){m.code==="auth/user-not-found"?(e(G,"User not found."),e(R,"Try creating an account")):m.code==="auth/wrong-password"?(e(G,"Incorrect password."),e(R,"Please check your password and try again.")):m.code==="auth/invalid-email"?(e(G,"Invalid email."),e(R,"Please enter a valid email address.")):m.code==="auth/weak-password"?(e(G,"Password is too weak."),e(R,"Please choose a stronger password.")):m.code==="auth/email-already-in-use"?(e(G,"Email address is already in use."),e(R,"Please use a different email address.")):(e(G,"An unexpected error occurred."),e(R,"Uh that's awkward..."))}async function Me(m){m.preventDefault(),o.login(r(c),r(s)).then(()=>{e(f,!1),e(d,!0),t.onSuccessfulLogin()}).catch(S=>{e(f,!0),fe(S)}).finally(()=>{e(d,!1)})}async function Te(m){m.preventDefault(),o.resetPassword(r(c)).then(()=>{e(u,!0),e(d,!0)}).catch(S=>{e(u,!1),fe(S)}).finally(()=>{e(d,!1)})}async function Ve(m){if(r(s)!==r(n)){e(R,"Passwords do not match."),e(Z,!0);return}m.preventDefault(),e(d,!0),e(Z,!1),await o.signUp(r(c),r(s)).then(()=>{t.onSuccessfulLogin()}).catch(S=>{e(Z,!0),fe(S)}).finally(()=>{e(d,!1)})}ea(()=>{o.user&&t.onSuccessfulLogin()});var Ue=M(),Ge=_(Ue);{var We=m=>{var S=pa();a(m,S)},He=m=>{var S=M(),Je=_(S);P(Je,()=>ca,(Ke,Oe)=>{Oe(Ke,{class:"w-full max-w-sm mx-auto",children:(Qe,Ea)=>{var ze=La(),Re=_(ze);P(Re,()=>sa,(me,_e)=>{_e(me,{class:"flex items-center",children:(pe,Ye)=>{var re=ga(),ce=_(re);la(ce,"src",`${Ce??""}/images/cube.png`);var ge=i(ce,2);P(ge,()=>oa,(he,j)=>{j(he,{class:"text-center",children:(B,se)=>{x();var ee=C("Sellability");a(B,ee)},$$slots:{default:!0}})}),a(pe,re)},$$slots:{default:!0}})});var Xe=i(Re,2);P(Xe,()=>na,(me,_e)=>{_e(me,{children:(pe,Ye)=>{var re=M(),ce=_(re);{var ge=j=>{var B=wa(),se=T(B);ae(se,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(c)},set value(g){e(c,g,!0)}});var ee=i(se,2);{var D=g=>{var I=M(),y=_(I);P(y,()=>be,(A,N)=>{N(A,{class:"py-2",children:(v,l)=>{var h=ha(),$=_(h);ua($,{class:"size-4"});var E=i($,2);P(E,()=>ke,(q,J)=>{J(q,{children:(U,K)=>{x();var F=C("Email Sent!");a(U,F)},$$slots:{default:!0}})});var k=i(E,2);P(k,()=>ye,(q,J)=>{J(q,{children:(U,K)=>{x();var F=C("Please check your inbox for the password reset link.");a(U,F)},$$slots:{default:!0}})}),a(v,h)},$$slots:{default:!0}})}),a(g,I)};z(ee,g=>{r(u)&&g(D)})}var b=i(ee,2);const W=aa(()=>r(d)||r(u));Y(b,{type:"submit",class:"w-full",get disabled(){return r(W)},children:(g,I)=>{var y=$a(),A=_(y);{var N=l=>{Pe(l,{class:"mr-2 h-4 w-4 animate-spin"})};z(A,l=>{r(d)&&l(N)})}var v=i(A);te(()=>we(v,` ${r(u)?"Email Sent!":"Reset Password"}`)),a(g,y)},$$slots:{default:!0}});var H=i(b,2);Y(H,{class:"pl-2",variant:"link",onclick:()=>{e(ue,!1),e(f,!1),e(Z,!1)},children:(g,I)=>{x();var y=C("Back to sign in");a(g,y)},$$slots:{default:!0}}),V(B),xe("submit",B,Te),a(j,B)},he=(j,B)=>{{var se=D=>{var b=ba(),W=T(b);ae(W,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(c)},set value(v){e(c,v,!0)}});var H=i(W,2);ae(H,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return r(s)},set value(v){e(s,v,!0)}});var g=i(H,2);ae(g,{type:"password",placeholder:"Confirm Password",required:!0,class:"w-full",get value(){return r(n)},set value(v){e(n,v,!0)}});var I=i(g,2);{var y=v=>{var l=M(),h=_(l);P(h,()=>be,($,E)=>{E($,{variant:"destructive",class:"py-2",children:(k,q)=>{var J=xa(),U=_(J);je(U,{class:"size-4"});var K=i(U,2);P(K,()=>ke,(le,O)=>{O(le,{children:(Q,oe)=>{x();var X=C();te(()=>we(X,r(G))),a(Q,X)},$$slots:{default:!0}})});var F=i(K,2);P(F,()=>ye,(le,O)=>{O(le,{children:(Q,oe)=>{x();var X=C();te(()=>we(X,r(R))),a(Q,X)},$$slots:{default:!0}})}),a(k,J)},$$slots:{default:!0}})}),a(v,l)};z(I,v=>{r(Z)&&v(y)})}var A=i(I,2);Y(A,{type:"submit",class:"w-full",get disabled(){return r(d)},children:(v,l)=>{var h=Pa(),$=_(h);{var E=k=>{Pe(k,{class:"mr-2 h-4 w-4 animate-spin"})};z($,k=>{r(d)&&k(E)})}x(),a(v,h)},$$slots:{default:!0}});var N=i(A,2);Y(N,{variant:"link",class:"",onclick:()=>{e(ve,!1),e(Z,!1)},children:(v,l)=>{x();var h=C("Back to sign in");a(v,h)},$$slots:{default:!0}}),V(b),xe("submit",b,Ve),a(D,b)},ee=D=>{var b=Ca(),W=T(b);ae(W,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(c)},set value(l){e(c,l,!0)}});var H=i(W,2);ae(H,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return r(s)},set value(l){e(s,l,!0)}});var g=i(H,2);{var I=l=>{var h=M(),$=_(h);P($,()=>be,(E,k)=>{k(E,{variant:"destructive",class:"py-2",children:(q,J)=>{var U=ya(),K=_(U);je(K,{class:"size-4"});var F=i(K,2);P(F,()=>ke,(O,Q)=>{Q(O,{children:(oe,X)=>{x();var $e=C("Wrong password!");a(oe,$e)},$$slots:{default:!0}})});var le=i(F,2);P(le,()=>ye,(O,Q)=>{Q(O,{children:(oe,X)=>{x();var $e=C("Please try again.");a(oe,$e)},$$slots:{default:!0}})}),a(q,U)},$$slots:{default:!0}})}),a(l,h)};z(g,l=>{r(f)&&l(I)})}var y=i(g,2);Y(y,{type:"submit",class:"w-full",get disabled(){return r(d)},children:(l,h)=>{var $=ka(),E=_($);{var k=q=>{Pe(q,{class:"mr-2 h-4 w-4 animate-spin"})};z(E,q=>{r(d)&&q(k)})}x(),a(l,$)},$$slots:{default:!0}});var A=i(y,2),N=T(A);Y(N,{variant:"link",class:"",onclick:()=>{e(ve,!0),e(u,!1)},children:(l,h)=>{x();var $=C("Create an account");a(l,$)},$$slots:{default:!0}});var v=i(N,2);Y(v,{variant:"link",class:"",onclick:()=>{e(ue,!0),e(u,!1)},children:(l,h)=>{x();var $=C("Forgot password?");a(l,$)},$$slots:{default:!0}}),V(A),V(b),xe("submit",b,Me),a(D,b)};z(j,D=>{r(ve)?D(se):D(ee,!1)},B)}};z(ce,j=>{r(ue)?j(ge):j(he,!1)})}a(pe,re)},$$slots:{default:!0}})}),a(Qe,ze)},$$slots:{default:!0}})}),a(m,S)};z(Ge,m=>{o.user?m(We):m(He,!1)})}a(w,Ue),de()}var Aa=p('<div class="h-svh grid items-center p-3"><!></div>');function Ma(w,t){ie(t,!1);const o=ia();function c(){o.authRedirect===Ce+"/login/"&&(o.authRedirect=Ce+"/"),da(o.authRedirect)}Ze();var s=Aa(),n=T(s);Sa(n,{onSuccessfulLogin:c}),V(s),a(w,s),de()}export{Ma as component};
