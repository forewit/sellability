import{c as E,a as t,t as g,b as z,s as Me,e as pe}from"../chunks/CBM-1zP-.js";import{i as je}from"../chunks/DFpFJyp5.js";import{f as m,p as H,c as I,n as de,r as M,t as Y,a as J,u as De,s as v,g as y,h as d,j as B,i as c,A as Ve}from"../chunks/eKK4EgLQ.js";import{I as Pe,s as ye,n as Te,a as ce,c as ve,b as ue,m as We,C as Ge,d as He,k as Je,l as Ke,f as ne,B as X,g as Oe}from"../chunks/BcbHQrwy.js";import{b as ie}from"../chunks/CbBO-nEh.js";import{g as Qe}from"../chunks/Dq6Ax_Zb.js";import{l as ke,s as Le,p as G,b as fe,r as me,i as F,c as h}from"../chunks/kGUB_f2a.js";import{C as Ue}from"../chunks/Ck-z2TWz.js";import{L as he}from"../chunks/BpHGWlue.js";function Xe(u,e){const r=ke(e,["children","$$slots","$$events","$$legacy"]);Pe(u,Le({name:"mail"},()=>r,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(s,a)=>{var o=E(),n=m(o);ye(n,e,"default",{}),t(s,o)},$$slots:{default:!0}}))}function Ye(u,e){const r=ke(e,["children","$$slots","$$events","$$legacy"]);Pe(u,Le({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(s,a)=>{var o=E(),n=m(o);ye(n,e,"default",{}),t(s,o)},$$slots:{default:!0}}))}const Ze=Te({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var et=g("<div><!></div>");function be(u,e){H(e,!0);let r=G(e,"ref",15,null),i=G(e,"variant",3,"default"),s=me(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var a=et();let o;var n=I(a);ce(n,()=>e.children??de),M(a),fe(a,_=>r(_),()=>r()),Y(_=>o=ue(a,o,{class:_,...s,role:"alert"}),[()=>ve(Ze({variant:i()}),e.class)]),t(u,a),J()}var tt=g("<div><!></div>");function xe(u,e){H(e,!0);let r=G(e,"ref",15,null),i=me(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=tt();let a;var o=I(s);ce(o,()=>e.children??de),M(s),fe(s,n=>r(n),()=>r()),Y(n=>a=ue(s,a,{class:n,...i}),[()=>ve("text-sm [&_p]:leading-relaxed",e.class)]),t(u,s),J()}var at=g("<div><!></div>");function we(u,e){H(e,!0);let r=G(e,"ref",15,null),i=G(e,"level",3,5),s=me(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var a=at();let o;var n=I(a);ce(n,()=>e.children??de),M(a),fe(a,_=>r(_),()=>r()),Y(_=>o=ue(a,o,{role:"heading","aria-level":i(),class:_,...s}),[()=>ve("mb-1 font-medium leading-none tracking-tight",e.class)]),t(u,a),J()}var rt=g('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),st=g('<img class="w-24" alt="logo"> <!>',1),lt=g("<!> <!> <!>",1),ot=g("<!> ",1),nt=g('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),it=g("<!> <!> <!>",1),dt=g("<!> Login",1),ct=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!></form>'),vt=g("<!> <!>",1);function ut(u,e){H(e,!0);const r=We();let i=B(""),s=B(""),a=B(!1),o=B(!1),n=B(!1),_=B(!1);async function Ce(p){p.preventDefault();try{c(a,!1),c(n,!0),await r.login(d(i),d(s)),e.onSuccessfulLogin()}catch{console.log("Login failed!"),c(a,!0)}finally{c(n,!1)}}async function Ae(p){p.preventDefault();try{c(o,!0),c(n,!0),await r.resetPassword(d(i))}catch{console.log("Password reset failed!"),c(o,!1)}finally{c(n,!1)}}De(()=>{r.user&&e.onSuccessfulLogin()});var ge=E(),Se=m(ge);{var Re=p=>{var N=rt();t(p,N)},ze=p=>{var N=E(),Ee=m(N);h(Ee,()=>Ue,(Ne,qe)=>{qe(Ne,{class:"w-full max-w-sm mx-auto",children:(Be,mt)=>{var _e=vt(),$e=m(_e);h($e,()=>Ge,(Z,ee)=>{ee(Z,{class:"flex items-center",children:(te,Ie)=>{var j=st(),K=m(j);He(K,"src",`${ie??""}/images/cube.png`);var ae=v(K,2);h(ae,()=>Je,(re,w)=>{w(re,{class:"text-center",children:($,q)=>{y();var k=z("Sellability");t($,k)},$$slots:{default:!0}})}),t(te,j)},$$slots:{default:!0}})});var Fe=v($e,2);h(Fe,()=>Ke,(Z,ee)=>{ee(Z,{children:(te,Ie)=>{var j=E(),K=m(j);{var ae=w=>{var $=nt(),q=I($);ne(q,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return d(i)},set value(l){c(i,l,!0)}});var k=v(q,2);{var O=l=>{var b=E(),f=m(b);h(f,()=>be,(P,L)=>{L(P,{class:"py-2",children:(x,D)=>{var V=lt(),T=m(V);Xe(T,{class:"size-4"});var W=v(T,2);h(W,()=>we,(C,A)=>{A(C,{children:(S,oe)=>{y();var R=z("Email Sent!");t(S,R)},$$slots:{default:!0}})});var le=v(W,2);h(le,()=>xe,(C,A)=>{A(C,{children:(S,oe)=>{y();var R=z("Please check your inbox for the password reset link.");t(S,R)},$$slots:{default:!0}})}),t(x,V)},$$slots:{default:!0}})}),t(l,b)};F(k,l=>{d(o)&&l(O)})}var Q=v(k,2);const U=Ve(()=>d(n)||d(o));X(Q,{type:"submit",class:"w-full",get disabled(){return d(U)},children:(l,b)=>{var f=ot(),P=m(f);{var L=D=>{he(D,{class:"mr-2 h-4 w-4 animate-spin"})};F(P,D=>{d(n)&&D(L)})}var x=v(P);Y(()=>Me(x,` ${d(o)?"Email Sent!":"Reset Password"}`)),t(l,f)},$$slots:{default:!0}});var se=v(Q,2);X(se,{class:"pl-2",variant:"link",onclick:()=>{c(_,!1),c(a,!1)},children:(l,b)=>{y();var f=z("Back to sign in");t(l,f)},$$slots:{default:!0}}),M($),pe("submit",$,Ae),t(w,$)},re=w=>{var $=ct(),q=I($);ne(q,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return d(i)},set value(l){c(i,l,!0)}});var k=v(q,2);ne(k,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return d(s)},set value(l){c(s,l,!0)}});var O=v(k,2);{var Q=l=>{var b=E(),f=m(b);h(f,()=>be,(P,L)=>{L(P,{variant:"destructive",class:"py-2",children:(x,D)=>{var V=it(),T=m(V);Ye(T,{class:"size-4"});var W=v(T,2);h(W,()=>we,(C,A)=>{A(C,{children:(S,oe)=>{y();var R=z("Wrong password!");t(S,R)},$$slots:{default:!0}})});var le=v(W,2);h(le,()=>xe,(C,A)=>{A(C,{children:(S,oe)=>{y();var R=z("Please try again.");t(S,R)},$$slots:{default:!0}})}),t(x,V)},$$slots:{default:!0}})}),t(l,b)};F(O,l=>{d(a)&&l(Q)})}var U=v(O,2);X(U,{type:"submit",class:"w-full",get disabled(){return d(n)},children:(l,b)=>{var f=dt(),P=m(f);{var L=x=>{he(x,{class:"mr-2 h-4 w-4 animate-spin"})};F(P,x=>{d(n)&&x(L)})}y(),t(l,f)},$$slots:{default:!0}});var se=v(U,2);X(se,{variant:"link",onclick:()=>{c(_,!0),c(o,!1)},children:(l,b)=>{y();var f=z("Forgot password?");t(l,f)},$$slots:{default:!0}}),M($),pe("submit",$,Ce),t(w,$)};F(K,w=>{d(_)?w(ae):w(re,!1)})}t(te,j)},$$slots:{default:!0}})}),t(Be,_e)},$$slots:{default:!0}})}),t(p,N)};F(Se,p=>{r.user?p(Re):p(ze,!1)})}t(u,ge),J()}var ft=g('<div class="h-svh grid items-center p-3"><!></div>');function yt(u,e){H(e,!1);const r=Oe();function i(){r.authRedirect===ie+"/login/"&&(r.authRedirect=ie+"/"),Qe(r.authRedirect)}je();var s=ft(),a=I(s);ut(a,{onSuccessfulLogin:i}),M(s),t(u,s),J()}export{yt as component};
