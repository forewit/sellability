import{c as ee,a as r,t as _,b as z,s as _e,e as he}from"../chunks/DlkfHlMj.js";import{i as De}from"../chunks/MeeaDnBW.js";import{f as x,p as ne,c as N,n as Ce,r as G,t as ae,a as ie,u as ze,s as d,g as A,h as a,j as b,i as e,F as ke,G as Te,H as Me}from"../chunks/B2hv1C7k.js";import{I as Ne,l as Ge,s as Le,a as Se,b as Ae,m as He,C as Je,d as Ke,j as Oe,k as Qe,B as T,g as Ve}from"../chunks/Bq3X2p4M.js";import{b as we}from"../chunks/CiV9bCr-.js";import{g as We}from"../chunks/TRRQqPeo.js";import{l as Xe,s as Ye,p as $e,b as qe,r as Ee,i as C,c as M}from"../chunks/V5fbYSCP.js";import{C as Ze}from"../chunks/C3OJ3EyM.js";import{I as X}from"../chunks/7AlagGW7.js";import{A as ea}from"../chunks/Djazm37V.js";import{L as ge,C as aa}from"../chunks/WcipPlO_.js";function ra(L,s){const u=Xe(s,["children","$$slots","$$events","$$legacy"]);Ne(L,Ye({name:"triangle-alert"},()=>u,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(t,o)=>{var P=ee(),i=x(P);Ge(i,s,"default",{}),r(t,P)},$$slots:{default:!0}}))}var ta=_("<div><!></div>");function sa(L,s){ne(s,!0);let u=$e(s,"ref",15,null),h=Ee(s,["$$slots","$$events","$$legacy","ref","class","children"]);var t=ta();let o;var P=N(t);Le(P,()=>s.children??Ce),G(t),qe(t,i=>u(i),()=>u()),ae(i=>o=Ae(t,o,{class:i,...h}),[()=>Se("text-sm [&_p]:leading-relaxed",s.class)]),r(L,t),ie()}var la=_("<div><!></div>");function oa(L,s){ne(s,!0);let u=$e(s,"ref",15,null),h=$e(s,"level",3,5),t=Ee(s,["$$slots","$$events","$$legacy","ref","class","level","children"]);var o=la();let P;var i=N(o);Le(i,()=>s.children??Ce),G(o),qe(o,v=>u(v),()=>u()),ae(v=>P=Ae(o,P,{role:"heading","aria-level":h(),class:v,...t}),[()=>Se("mb-1 font-medium leading-none tracking-tight",s.class)]),r(L,o),ie()}var na=_("<!> <!> <!>",1),ia=_('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),da=_('<img class="w-24" alt="logo"> <!>',1),ca=_("<!> ",1),ua=_('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),fa=_("<!> Create account",1),va=_('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!></form>'),ma=_("<!> Login",1),pa=_('<form class="flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-between"><!> <!></div></form>'),_a=_("<!> <!>",1);function ha(L,s){ne(s,!0);const u=(l,p)=>{let te=Te(()=>Me(p==null?void 0:p(),!1));var se=ee(),ue=x(se);const fe=ke(()=>a(te)?"destructive":"default");M(ue,()=>ea,(be,le)=>{le(be,{class:"py-2",get variant(){return a(fe)},children:(oe,xe)=>{var J=na(),K=x(J);{var Y=m=>{ra(m,{class:"size-4"})},ve=m=>{aa(m,{class:"size-4"})};C(K,m=>{a(te)?m(Y):m(ve,!1)})}var q=d(K,2);M(q,()=>oa,(m,F)=>{F(m,{children:(w,k)=>{A();var y=z();ae(()=>_e(y,a(i))),r(w,y)},$$slots:{default:!0}})});var O=d(q,2);M(O,()=>sa,(m,F)=>{F(m,{children:(w,k)=>{A();var y=z();ae(()=>_e(y,a(v))),r(w,y)},$$slots:{default:!0}})}),r(oe,J)},$$slots:{default:!0}})}),r(l,se)},h=He();let t=b(""),o=b(""),P=b(""),i=b(""),v=b(""),re=b(!1),R=b(!1),g=b(!1),de=b(!1),H=b(!1),ce=b(!1);function Pe(l){l.code==="auth/user-not-found"?(e(i,"User not found."),e(v,"Try creating an account")):l.code==="auth/wrong-password"?(e(i,"Incorrect password."),e(v,"Please check your password and try again.")):l.code==="auth/invalid-email"?(e(i,"Invalid email."),e(v,"Please enter a valid email address.")):l.code==="auth/weak-password"?(e(i,"Password is too weak."),e(v,"Please choose a stronger password.")):l.code==="auth/email-already-in-use"?(e(i,"Email address is already in use."),e(v,"Please use a different email address.")):(e(i,"An unexpected error occurred."),e(v,"Uh that's awkward..."))}async function Ue(l){l.preventDefault(),h.login(a(t),a(o)).then(()=>{e(re,!1),e(g,!0),s.onSuccessfulLogin()}).catch(p=>{e(re,!0),e(i,"Username or password is incorrect."),e(v,"Please check your credentials and try again.")}).finally(()=>{e(g,!1)})}async function Ie(l){l.preventDefault(),h.resetPassword(a(t)).then(()=>{e(R,!0),e(g,!0),e(i,"Password Reset Email Sent"),e(v,"Please check your inbox for further instructions.")}).catch(p=>{e(R,!1),Pe(p)}).finally(()=>{e(g,!1)})}async function Re(l){if(a(o)!==a(P)){e(i,"Passwords do not match."),e(v,"Please check your password and try again."),e(H,!0);return}l.preventDefault(),e(g,!0),e(H,!1),await h.signUp(a(t),a(o)).then(()=>{s.onSuccessfulLogin()}).catch(p=>{e(H,!0),Pe(p)}).finally(()=>{e(g,!1)})}ze(()=>{h.user&&s.onSuccessfulLogin()});var ye=ee(),Fe=x(ye);{var je=l=>{var p=ia();r(l,p)},Be=l=>{var p=ee(),te=x(p);M(te,()=>Ze,(se,ue)=>{ue(se,{class:"w-full max-w-sm mx-auto",children:(fe,be)=>{var le=_a(),oe=x(le);M(oe,()=>Je,(J,K)=>{K(J,{class:"flex items-center",children:(Y,ve)=>{var q=da(),O=x(q);Ke(O,"src",`${we??""}/images/cube.png`);var m=d(O,2);M(m,()=>Oe,(F,w)=>{w(F,{class:"text-center",children:(k,y)=>{A();var Q=z("Sellability");r(k,Q)},$$slots:{default:!0}})}),r(Y,q)},$$slots:{default:!0}})});var xe=d(oe,2);M(xe,()=>Qe,(J,K)=>{K(J,{children:(Y,ve)=>{var q=ee(),O=x(q);{var m=w=>{var k=ua(),y=N(k);X(y,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(t)},set value(f){e(t,f,!0)}});var Q=d(y,2);{var E=f=>{u(f)};C(Q,f=>{a(R)&&f(E)})}var $=d(Q,2);const j=ke(()=>a(g)||a(R));T($,{type:"submit",class:"w-full",get disabled(){return a(j)},children:(f,V)=>{var S=ca(),U=x(S);{var W=n=>{ge(n,{class:"mr-2 h-4 w-4 animate-spin"})};C(U,n=>{a(g)&&n(W)})}var c=d(U);ae(()=>_e(c,` ${a(R)?"Email Sent!":"Reset Password"}`)),r(f,S)},$$slots:{default:!0}});var B=d($,2);T(B,{class:"pl-2",variant:"link",onclick:()=>{e(de,!1),e(re,!1),e(H,!1)},children:(f,V)=>{A();var S=z("Back to sign in");r(f,S)},$$slots:{default:!0}}),G(k),he("submit",k,Ie),r(w,k)},F=(w,k)=>{{var y=E=>{var $=va(),j=N($);X(j,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(t)},set value(c){e(t,c,!0)}});var B=d(j,2);X(B,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return a(o)},set value(c){e(o,c,!0)}});var f=d(B,2);X(f,{type:"password",placeholder:"Confirm Password",required:!0,class:"w-full",get value(){return a(P)},set value(c){e(P,c,!0)}});var V=d(f,2);{var S=c=>{u(c,()=>!0)};C(V,c=>{a(H)&&c(S)})}var U=d(V,2);T(U,{type:"submit",class:"w-full",get disabled(){return a(g)},children:(c,n)=>{var D=fa(),I=x(D);{var me=Z=>{ge(Z,{class:"mr-2 h-4 w-4 animate-spin"})};C(I,Z=>{a(g)&&Z(me)})}A(),r(c,D)},$$slots:{default:!0}});var W=d(U,2);T(W,{variant:"link",class:"",onclick:()=>{e(ce,!1),e(H,!1)},children:(c,n)=>{A();var D=z("Back to sign in");r(c,D)},$$slots:{default:!0}}),G($),he("submit",$,Re),r(E,$)},Q=E=>{var $=pa(),j=N($);X(j,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(t)},set value(n){e(t,n,!0)}});var B=d(j,2);X(B,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return a(o)},set value(n){e(o,n,!0)}});var f=d(B,2);{var V=n=>{u(n,()=>!0)};C(f,n=>{a(re)&&n(V)})}var S=d(f,2);T(S,{type:"submit",class:"w-full",get disabled(){return a(g)},children:(n,D)=>{var I=ma(),me=x(I);{var Z=pe=>{ge(pe,{class:"mr-2 h-4 w-4 animate-spin"})};C(me,pe=>{a(g)&&pe(Z)})}A(),r(n,I)},$$slots:{default:!0}});var U=d(S,2),W=N(U);T(W,{variant:"link",class:"",onclick:()=>{e(ce,!0),e(R,!1)},children:(n,D)=>{A();var I=z("Create an account");r(n,I)},$$slots:{default:!0}});var c=d(W,2);T(c,{variant:"link",class:"",onclick:()=>{e(de,!0),e(R,!1)},children:(n,D)=>{A();var I=z("Forgot password?");r(n,I)},$$slots:{default:!0}}),G(U),G($),he("submit",$,Ue),r(E,$)};C(w,E=>{a(ce)?E(y):E(Q,!1)},k)}};C(O,w=>{a(de)?w(m):w(F,!1)})}r(Y,q)},$$slots:{default:!0}})}),r(fe,le)},$$slots:{default:!0}})}),r(l,p)};C(Fe,l=>{h.user?l(je):l(Be,!1)})}r(L,ye),ie()}var ga=_('<div class="h-svh grid items-center p-3"><!></div>');function qa(L,s){ne(s,!1);const u=Ve();function h(){u.authRedirect===we+"/login/"&&(u.authRedirect=we+"/"),We(u.authRedirect)}De();var t=ga(),o=N(t);ha(o,{onSuccessfulLogin:h}),G(t),r(L,t),ie()}export{qa as component};
