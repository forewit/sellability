import{c as ae,a as r,t as g,b as M,s as ge,e as he}from"../chunks/BLWHbZsl.js";import{i as Fe}from"../chunks/C1nv5X5H.js";import{f as k,p as re,c as R,n as $e,r as j,t as Y,a as se,u as ze,s as u,g as A,h as a,j as y,i as e,ac as Ee,_ as Te,ad as Me}from"../chunks/BwRzXI3Y.js";import{I as Ne,k as Ve,l as Ge,s as xe,c as Pe,a as ye,m as He,C as Je,b as Ke,h as Oe,j as Qe,B as N,g as We}from"../chunks/Cta5LdC_.js";import{b as be}from"../chunks/DLtm0iu8.js";import{g as Xe}from"../chunks/DC76ykgI.js";import{l as Ye,s as Ze,p as te,b as ke,r as Ce,i as L,c as V}from"../chunks/C58G3OPR.js";import{C as ea}from"../chunks/BoIXofSK.js";import{I as X}from"../chunks/B-vMMu4n.js";import{L as we,C as aa}from"../chunks/BeOSOMGv.js";function ta(x,t){const d=Ye(t,["children","$$slots","$$events","$$legacy"]);Ne(x,Ze({name:"triangle-alert"},()=>d,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(s,l)=>{var _=ae(),o=k(_);Ve(o,t,"default",{}),r(s,_)},$$slots:{default:!0}}))}const ra=Ge({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var sa=g("<div><!></div>");function la(x,t){re(t,!0);let d=te(t,"ref",15,null),m=te(t,"variant",3,"default"),s=Ce(t,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var l=sa();let _;var o=R(l);xe(o,()=>t.children??$e),j(l),ke(l,c=>d(c),()=>d()),Y(c=>_=ye(l,_,{class:c,...s,role:"alert"}),[()=>Pe(ra({variant:m()}),t.class)]),r(x,l),se()}var oa=g("<div><!></div>");function na(x,t){re(t,!0);let d=te(t,"ref",15,null),m=Ce(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=oa();let l;var _=R(s);xe(_,()=>t.children??$e),j(s),ke(s,o=>d(o),()=>d()),Y(o=>l=ye(s,l,{class:o,...m}),[()=>Pe("text-sm [&_p]:leading-relaxed",t.class)]),r(x,s),se()}var ia=g("<div><!></div>");function da(x,t){re(t,!0);let d=te(t,"ref",15,null),m=te(t,"level",3,5),s=Ce(t,["$$slots","$$events","$$legacy","ref","class","level","children"]);var l=ia();let _;var o=R(l);xe(o,()=>t.children??$e),j(l),ke(l,c=>d(c),()=>d()),Y(c=>_=ye(l,_,{role:"heading","aria-level":m(),class:c,...s}),[()=>Pe("mb-1 font-medium leading-none tracking-tight",t.class)]),r(x,l),se()}var ca=g("<!> <!> <!>",1),ua=g('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),fa=g('<img class="w-24" alt="logo"> <!>',1),va=g("<!> ",1),ma=g('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),_a=g("<!> Create account",1),pa=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!></form>'),ga=g("<!> Login",1),ha=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-between"><!> <!></div></form>'),wa=g("<!> <!>",1);function ba(x,t){re(t,!0);const d=(n,h)=>{let oe=Te(()=>Me(h==null?void 0:h(),!1));var ne=ae(),fe=k(ne);const ve=Ee(()=>a(oe)?"destructive":"default");V(fe,()=>la,(Ae,ie)=>{ie(Ae,{class:"py-2",get variant(){return a(ve)},children:(de,qe)=>{var H=ca(),J=k(H);{var Z=p=>{ta(p,{class:"size-4"})},me=p=>{aa(p,{class:"size-4"})};L(J,p=>{a(oe)?p(Z):p(me,!1)})}var q=u(J,2);V(q,()=>da,(p,D)=>{D(p,{children:(b,C)=>{A();var P=M();Y(()=>ge(P,a(o))),r(b,P)},$$slots:{default:!0}})});var K=u(q,2);V(K,()=>na,(p,D)=>{D(p,{children:(b,C)=>{A();var P=M();Y(()=>ge(P,a(c))),r(b,P)},$$slots:{default:!0}})}),r(de,H)},$$slots:{default:!0}})}),r(n,ne)},m=He();let s=y(""),l=y(""),_=y(""),o=y(""),c=y(""),le=y(!1),B=y(!1),w=y(!1),ce=y(!1),G=y(!1),ue=y(!1);function Le(n){n.code==="auth/user-not-found"?(e(o,"User not found."),e(c,"Try creating an account")):n.code==="auth/wrong-password"?(e(o,"Incorrect password."),e(c,"Please check your password and try again.")):n.code==="auth/invalid-email"?(e(o,"Invalid email."),e(c,"Please enter a valid email address.")):n.code==="auth/weak-password"?(e(o,"Password is too weak."),e(c,"Please choose a stronger password.")):n.code==="auth/email-already-in-use"?(e(o,"Email address is already in use."),e(c,"Please use a different email address.")):(e(o,"An unexpected error occurred."),e(c,"Uh that's awkward..."))}async function Ue(n){n.preventDefault(),m.login(a(s),a(l)).then(()=>{e(le,!1),e(w,!0),t.onSuccessfulLogin()}).catch(h=>{e(le,!0),e(o,"Username or password is incorrect."),e(c,"Please check your credentials and try again.")}).finally(()=>{e(w,!1)})}async function Ie(n){n.preventDefault(),m.resetPassword(a(s)).then(()=>{e(B,!0),e(w,!0),e(o,"Password Reset Email Sent"),e(c,"Please check your inbox for further instructions.")}).catch(h=>{e(B,!1),Le(h)}).finally(()=>{e(w,!1)})}async function Re(n){if(a(l)!==a(_)){e(o,"Passwords do not match."),e(c,"Please check your password and try again."),e(G,!0);return}n.preventDefault(),e(w,!0),e(G,!1),await m.signUp(a(s),a(l)).then(()=>{t.onSuccessfulLogin()}).catch(h=>{e(G,!0),Le(h)}).finally(()=>{e(w,!1)})}ze(()=>{m.user&&t.onSuccessfulLogin()});var Se=ae(),je=k(Se);{var Be=n=>{var h=ua();r(n,h)},De=n=>{var h=ae(),oe=k(h);V(oe,()=>ea,(ne,fe)=>{fe(ne,{class:"w-full max-w-sm mx-auto",children:(ve,Ae)=>{var ie=wa(),de=k(ie);V(de,()=>Je,(H,J)=>{J(H,{class:"flex items-center",children:(Z,me)=>{var q=fa(),K=k(q);Ke(K,"src",`${be??""}/images/cube.png`);var p=u(K,2);V(p,()=>Oe,(D,b)=>{b(D,{class:"text-center",children:(C,P)=>{A();var O=M("Sellability");r(C,O)},$$slots:{default:!0}})}),r(Z,q)},$$slots:{default:!0}})});var qe=u(de,2);V(qe,()=>Qe,(H,J)=>{J(H,{children:(Z,me)=>{var q=ae(),K=k(q);{var p=b=>{var C=ma(),P=R(C);X(P,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(s)},set value(v){e(s,v,!0)}});var O=u(P,2);{var E=v=>{d(v)};L(O,v=>{a(B)&&v(E)})}var $=u(O,2);const F=Ee(()=>a(w)||a(B));N($,{type:"submit",class:"w-full",get disabled(){return a(F)},children:(v,Q)=>{var S=va(),U=k(S);{var W=i=>{we(i,{class:"mr-2 h-4 w-4 animate-spin"})};L(U,i=>{a(w)&&i(W)})}var f=u(U);Y(()=>ge(f,` ${a(B)?"Email Sent!":"Reset Password"}`)),r(v,S)},$$slots:{default:!0}});var z=u($,2);N(z,{class:"pl-2",variant:"link",onclick:()=>{e(ce,!1),e(le,!1),e(G,!1)},children:(v,Q)=>{A();var S=M("Back to sign in");r(v,S)},$$slots:{default:!0}}),j(C),he("submit",C,Ie),r(b,C)},D=(b,C)=>{{var P=E=>{var $=pa(),F=R($);X(F,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(s)},set value(f){e(s,f,!0)}});var z=u(F,2);X(z,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return a(l)},set value(f){e(l,f,!0)}});var v=u(z,2);X(v,{type:"password",placeholder:"Confirm Password",required:!0,class:"w-full",get value(){return a(_)},set value(f){e(_,f,!0)}});var Q=u(v,2);{var S=f=>{d(f,()=>!0)};L(Q,f=>{a(G)&&f(S)})}var U=u(Q,2);N(U,{type:"submit",class:"w-full",get disabled(){return a(w)},children:(f,i)=>{var T=_a(),I=k(T);{var _e=ee=>{we(ee,{class:"mr-2 h-4 w-4 animate-spin"})};L(I,ee=>{a(w)&&ee(_e)})}A(),r(f,T)},$$slots:{default:!0}});var W=u(U,2);N(W,{variant:"link",class:"",onclick:()=>{e(ue,!1),e(G,!1)},children:(f,i)=>{A();var T=M("Back to sign in");r(f,T)},$$slots:{default:!0}}),j($),he("submit",$,Re),r(E,$)},O=E=>{var $=ha(),F=R($);X(F,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return a(s)},set value(i){e(s,i,!0)}});var z=u(F,2);X(z,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return a(l)},set value(i){e(l,i,!0)}});var v=u(z,2);{var Q=i=>{d(i,()=>!0)};L(v,i=>{a(le)&&i(Q)})}var S=u(v,2);N(S,{type:"submit",class:"w-full",get disabled(){return a(w)},children:(i,T)=>{var I=ga(),_e=k(I);{var ee=pe=>{we(pe,{class:"mr-2 h-4 w-4 animate-spin"})};L(_e,pe=>{a(w)&&pe(ee)})}A(),r(i,I)},$$slots:{default:!0}});var U=u(S,2),W=R(U);N(W,{variant:"link",class:"",onclick:()=>{e(ue,!0),e(B,!1)},children:(i,T)=>{A();var I=M("Create an account");r(i,I)},$$slots:{default:!0}});var f=u(W,2);N(f,{variant:"link",class:"",onclick:()=>{e(ce,!0),e(B,!1)},children:(i,T)=>{A();var I=M("Forgot password?");r(i,I)},$$slots:{default:!0}}),j(U),j($),he("submit",$,Ue),r(E,$)};L(b,E=>{a(ue)?E(P):E(O,!1)},C)}};L(K,b=>{a(ce)?b(p):b(D,!1)})}r(Z,q)},$$slots:{default:!0}})}),r(ve,ie)},$$slots:{default:!0}})}),r(n,h)};L(je,n=>{m.user?n(Be):n(De,!1)})}r(x,Se),se()}var $a=g('<div class="h-svh grid items-center p-3"><!></div>');function Ua(x,t){re(t,!1);const d=We();function m(){d.authRedirect===be+"/login/"&&(d.authRedirect=be+"/"),Xe(d.authRedirect)}Fe();var s=$a(),l=R(s);ba(l,{onSuccessfulLogin:m}),j(s),r(x,s),se()}export{Ua as component};
