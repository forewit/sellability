import{c as E,a as t,t as g,b as z,s as Fe,e as $e}from"../chunks/DEGKnJZC.js";import{i as Me}from"../chunks/Dad7ONXQ.js";import{f as m,p as H,c as B,n as de,r as F,t as Y,a as J,u as De,s as v,g as y,h as d,j,i as c,G as Ve}from"../chunks/CwUIB_ns.js";import{I as Pe,s as ye,m as Ge,a as ce,c as ve,b as ue,l as Te,C as We,d as He,j as Je,k as Ke,B as X,g as Oe}from"../chunks/DU5zpW-x.js";import{b as ie}from"../chunks/BLzWeyyg.js";import{g as Qe}from"../chunks/CtrdQ5__.js";import{l as ke,s as Le,p as W,b as fe,r as me,i as q,c as h}from"../chunks/LllUPRky.js";import{C as Ue}from"../chunks/DhRVN6dc.js";import{I as ne}from"../chunks/DAQ85HbX.js";import{L as he}from"../chunks/Dpe39-pH.js";function Xe(u,e){const r=ke(e,["children","$$slots","$$events","$$legacy"]);Pe(u,Le({name:"mail"},()=>r,{iconNode:[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"}]],children:(s,a)=>{var o=E(),n=m(o);ye(n,e,"default",{}),t(s,o)},$$slots:{default:!0}}))}function Ye(u,e){const r=ke(e,["children","$$slots","$$events","$$legacy"]);Pe(u,Le({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(s,a)=>{var o=E(),n=m(o);ye(n,e,"default",{}),t(s,o)},$$slots:{default:!0}}))}const Ze=Ge({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var et=g("<div><!></div>");function be(u,e){H(e,!0);let r=W(e,"ref",15,null),i=W(e,"variant",3,"default"),s=me(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var a=et();let o;var n=B(a);ce(n,()=>e.children??de),F(a),fe(a,_=>r(_),()=>r()),Y(_=>o=ue(a,o,{class:_,...s,role:"alert"}),[()=>ve(Ze({variant:i()}),e.class)]),t(u,a),J()}var tt=g("<div><!></div>");function xe(u,e){H(e,!0);let r=W(e,"ref",15,null),i=me(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=tt();let a;var o=B(s);ce(o,()=>e.children??de),F(s),fe(s,n=>r(n),()=>r()),Y(n=>a=ue(s,a,{class:n,...i}),[()=>ve("text-sm [&_p]:leading-relaxed",e.class)]),t(u,s),J()}var at=g("<div><!></div>");function we(u,e){H(e,!0);let r=W(e,"ref",15,null),i=W(e,"level",3,5),s=me(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var a=at();let o;var n=B(a);ce(n,()=>e.children??de),F(a),fe(a,_=>r(_),()=>r()),Y(_=>o=ue(a,o,{role:"heading","aria-level":i(),class:_,...s}),[()=>ve("mb-1 font-medium leading-none tracking-tight",e.class)]),t(u,a),J()}var rt=g('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),st=g('<img class="w-24" alt="logo"> <!>',1),lt=g("<!> <!> <!>",1),ot=g("<!> ",1),nt=g('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),it=g("<!> <!> <!>",1),dt=g("<!> Login",1),ct=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!></form>'),vt=g("<!> <!>",1);function ut(u,e){H(e,!0);const r=Te();let i=j(""),s=j(""),a=j(!1),o=j(!1),n=j(!1),_=j(!1);async function Ce($){$.preventDefault();try{c(a,!1),c(n,!0),await r.login(d(i),d(s)),e.onSuccessfulLogin()}catch{console.log("Login failed!"),c(a,!0)}finally{c(n,!1)}}async function Se($){$.preventDefault();try{c(o,!0),c(n,!0),await r.resetPassword(d(i))}catch{console.log("Password reset failed!"),c(o,!1)}finally{c(n,!1)}}De(()=>{r.user&&e.onSuccessfulLogin()});var ge=E(),Ae=m(ge);{var Re=$=>{var I=rt();t($,I)},ze=$=>{var I=E(),Ee=m(I);h(Ee,()=>Ue,(Ie,Ne)=>{Ne(Ie,{class:"w-full max-w-sm mx-auto",children:(je,mt)=>{var _e=vt(),pe=m(_e);h(pe,()=>We,(Z,ee)=>{ee(Z,{class:"flex items-center",children:(te,Be)=>{var M=st(),K=m(M);He(K,"src",`${ie??""}/images/cube.png`);var ae=v(K,2);h(ae,()=>Je,(re,w)=>{w(re,{class:"text-center",children:(p,N)=>{y();var k=z("Sellability");t(p,k)},$$slots:{default:!0}})}),t(te,M)},$$slots:{default:!0}})});var qe=v(pe,2);h(qe,()=>Ke,(Z,ee)=>{ee(Z,{children:(te,Be)=>{var M=E(),K=m(M);{var ae=w=>{var p=nt(),N=B(p);ne(N,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return d(i)},set value(l){c(i,l,!0)}});var k=v(N,2);{var O=l=>{var b=E(),f=m(b);h(f,()=>be,(P,L)=>{L(P,{class:"py-2",children:(x,D)=>{var V=lt(),G=m(V);Xe(G,{class:"size-4"});var T=v(G,2);h(T,()=>we,(C,S)=>{S(C,{children:(A,oe)=>{y();var R=z("Email Sent!");t(A,R)},$$slots:{default:!0}})});var le=v(T,2);h(le,()=>xe,(C,S)=>{S(C,{children:(A,oe)=>{y();var R=z("Please check your inbox for the password reset link.");t(A,R)},$$slots:{default:!0}})}),t(x,V)},$$slots:{default:!0}})}),t(l,b)};q(k,l=>{d(o)&&l(O)})}var Q=v(k,2);const U=Ve(()=>d(n)||d(o));X(Q,{type:"submit",class:"w-full",get disabled(){return d(U)},children:(l,b)=>{var f=ot(),P=m(f);{var L=D=>{he(D,{class:"mr-2 h-4 w-4 animate-spin"})};q(P,D=>{d(n)&&D(L)})}var x=v(P);Y(()=>Fe(x,` ${d(o)?"Email Sent!":"Reset Password"}`)),t(l,f)},$$slots:{default:!0}});var se=v(Q,2);X(se,{class:"pl-2",variant:"link",onclick:()=>{c(_,!1),c(a,!1)},children:(l,b)=>{y();var f=z("Back to sign in");t(l,f)},$$slots:{default:!0}}),F(p),$e("submit",p,Se),t(w,p)},re=w=>{var p=ct(),N=B(p);ne(N,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return d(i)},set value(l){c(i,l,!0)}});var k=v(N,2);ne(k,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return d(s)},set value(l){c(s,l,!0)}});var O=v(k,2);{var Q=l=>{var b=E(),f=m(b);h(f,()=>be,(P,L)=>{L(P,{variant:"destructive",class:"py-2",children:(x,D)=>{var V=it(),G=m(V);Ye(G,{class:"size-4"});var T=v(G,2);h(T,()=>we,(C,S)=>{S(C,{children:(A,oe)=>{y();var R=z("Wrong password!");t(A,R)},$$slots:{default:!0}})});var le=v(T,2);h(le,()=>xe,(C,S)=>{S(C,{children:(A,oe)=>{y();var R=z("Please try again.");t(A,R)},$$slots:{default:!0}})}),t(x,V)},$$slots:{default:!0}})}),t(l,b)};q(O,l=>{d(a)&&l(Q)})}var U=v(O,2);X(U,{type:"submit",class:"w-full",get disabled(){return d(n)},children:(l,b)=>{var f=dt(),P=m(f);{var L=x=>{he(x,{class:"mr-2 h-4 w-4 animate-spin"})};q(P,x=>{d(n)&&x(L)})}y(),t(l,f)},$$slots:{default:!0}});var se=v(U,2);X(se,{variant:"link",onclick:()=>{c(_,!0),c(o,!1)},children:(l,b)=>{y();var f=z("Forgot password?");t(l,f)},$$slots:{default:!0}}),F(p),$e("submit",p,Ce),t(w,p)};q(K,w=>{d(_)?w(ae):w(re,!1)})}t(te,M)},$$slots:{default:!0}})}),t(je,_e)},$$slots:{default:!0}})}),t($,I)};q(Ae,$=>{r.user?$(Re):$(ze,!1)})}t(u,ge),J()}var ft=g('<div class="h-svh grid items-center p-3"><!></div>');function kt(u,e){H(e,!1);const r=Oe();function i(){r.authRedirect===ie+"/login/"&&(r.authRedirect=ie+"/"),Qe(r.authRedirect)}Me();var s=ft(),a=B(s);ut(a,{onSuccessfulLogin:i}),F(s),t(u,s),J()}export{kt as component};
