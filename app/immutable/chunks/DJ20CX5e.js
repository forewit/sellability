var ht=Object.defineProperty;var vt=Object.getPrototypeOf;var mt=Reflect.get;var qe=n=>{throw TypeError(n)};var gt=(n,e,t)=>e in n?ht(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var M=(n,e,t)=>gt(n,typeof e!="symbol"?e+"":e,t),Re=(n,e,t)=>e.has(n)||qe("Cannot "+t);var o=(n,e,t)=>(Re(n,e,"read from private field"),t?t.call(n):e.get(n)),d=(n,e,t)=>e.has(n)?qe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,r)=>(Re(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),W=(n,e,t)=>(Re(n,e,"access private method"),t);var je=(n,e,t)=>mt(vt(n),t,e);import{c as L,a as O,o as A,m as yt,u as bt}from"./DPvGQa7o.js";import"./BYGnPkYW.js";import{C as Ge,D as pt,au as Et,av as wt,aw as St,B as Tt,M as Nt,L as At,N as It,U as Lt,f as F,Z as X,h as l,i as p,j as R,u as re,ax as Ot,ay as Ze,az as Ft,a7 as Dt,V as Ct,z as ve,p as z,a as q,n as j,aA as Pt,aB as xt,e as kt}from"./U34GVLgG.js";import{I as _t,s as Rt,a as G}from"./D2exrcrs.js";import{l as Mt,s as Bt,i as nt,p as w}from"./BXHZD-jw.js";import{i as ie,d as h,w as I,h as Y,n as N,u as Ue,o as Ut,c as rt,j as Kt}from"./DqptM0Y-.js";function Ht(n,e,t){Ge&&pt();var r=n,s=Lt,i,u=Et()?wt:St;Tt(()=>{u(s,s=e())&&(i&&Nt(i),i=At(()=>t(r)))}),Ge&&(r=It)}function Qn(n,e){const t=Mt(e,["children","$$slots","$$events","$$legacy"]);_t(n,Bt({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(s,i)=>{var u=L(),a=F(u);Rt(a,e,"default",{}),O(s,u)},$$slots:{default:!0}}))}var C,P,x,J,pe;const Ve=class Ve extends Map{constructor(t){super();d(this,J);d(this,C,new Map);d(this,P,X(0));d(this,x,X(0));if(t){for(var[r,s]of t)super.set(r,s);o(this,x).v=super.size}}has(t){var r=o(this,C),s=r.get(t);if(s===void 0){var i=super.get(t);if(i!==void 0)s=X(0),r.set(t,s);else return l(o(this,P)),!1}return l(s),!0}forEach(t,r){W(this,J,pe).call(this),super.forEach(t,r)}get(t){var r=o(this,C),s=r.get(t);if(s===void 0){var i=super.get(t);if(i!==void 0)s=X(0),r.set(t,s);else{l(o(this,P));return}}return l(s),super.get(t)}set(t,r){var y;var s=o(this,C),i=s.get(t),u=super.get(t),a=super.set(t,r),c=o(this,P);if(i===void 0)s.set(t,X(0)),p(o(this,x),super.size),ie(c);else if(u!==r){ie(i);var m=c.reactions===null?null:new Set(c.reactions),E=m===null||!((y=i.reactions)!=null&&y.every(v=>m.has(v)));E&&ie(c)}return a}delete(t){var r=o(this,C),s=r.get(t),i=super.delete(t);return s!==void 0&&(r.delete(t),p(o(this,x),super.size),p(s,-1),ie(o(this,P))),i}clear(){if(super.size!==0){super.clear();var t=o(this,C);p(o(this,x),0);for(var r of t.values())p(r,-1);ie(o(this,P)),t.clear()}}keys(){return l(o(this,P)),super.keys()}values(){return W(this,J,pe).call(this),super.values()}entries(){return W(this,J,pe).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return l(o(this,x)),super.size}};C=new WeakMap,P=new WeakMap,x=new WeakMap,J=new WeakSet,pe=function(){l(o(this,P));var t=o(this,C);if(o(this,x).v!==t.size)for(var r of je(Ve.prototype,this,"keys").call(this))t.has(r)||t.set(r,X(0));for(var[,s]of o(this,C))l(s)};let Me=Ve;var oe,ue;class Wt{constructor(e){d(this,oe,R(void 0));d(this,ue);re(()=>{p(o(this,oe),o(this,ue),!0),T(this,ue,e())})}get current(){return l(o(this,oe))}}oe=new WeakMap,ue=new WeakMap;var ae,k;class Vt{constructor(e){d(this,ae);d(this,k);T(this,ae,e),T(this,k,Symbol(e))}get key(){return o(this,k)}exists(){return Ot(o(this,k))}get(){const e=Ze(o(this,k));if(e===void 0)throw new Error(`Context "${o(this,ae)}" not found`);return e}getOr(e){const t=Ze(o(this,k));return t===void 0?e:t}set(e){return Ft(o(this,k),e)}}ae=new WeakMap,k=new WeakMap;function Ke(n,e){return setTimeout(e,n)}function ke(n){Dt().then(n)}const $n="ArrowDown",er="ArrowLeft",tr="ArrowRight",nr="ArrowUp",rr="End",sr="Enter",zt="Escape",ir="Home",or="PageDown",ur="PageUp",ar=" ",qt="Tab",He=typeof document<"u",Xe=jt();function jt(){var n,e;return He&&((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Be(n){return n instanceof HTMLElement}function Gt(n){return n instanceof Element}function cr(n){return n instanceof Element||n instanceof SVGElement}function lr(n){return n!==null}function Zt(n){return n instanceof HTMLInputElement&&"select"in n}function Xt(n,e){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Yt(n,e){const t=h(n);function r(i){return e[t.current][i]??t.current}return{state:t,dispatch:i=>{t.current=r(i)}}}function Jt(n,e){let t=R(Ct({})),r=R("none");const s=n.current?"mounted":"unmounted";let i=R(null);const u=new Wt(()=>n.current);I([()=>e.current,()=>n.current],([v,D])=>{!v||!D||ke(()=>{p(i,document.getElementById(v),!0)})});const{state:a,dispatch:c}=Yt(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});I(()=>n.current,v=>{if(l(i)||p(i,document.getElementById(e.current),!0),!l(i)||!(v!==u.current))return;const Z=l(r),me=ye(l(i));v?c("MOUNT"):me==="none"||l(t).display==="none"?c("UNMOUNT"):c(u&&Z!==me?"ANIMATION_OUT":"UNMOUNT")});function m(v){if(l(i)||p(i,document.getElementById(e.current),!0),!l(i))return;const D=ye(l(i)),Z=D.includes(v.animationName)||D==="none";v.target===l(i)&&Z&&c("ANIMATION_END")}function E(v){l(i)||p(i,document.getElementById(e.current),!0),l(i)&&v.target===l(i)&&p(r,ye(l(i)),!0)}I(()=>a.current,()=>{if(l(i)||p(i,document.getElementById(e.current),!0),!l(i))return;const v=ye(l(i));p(r,a.current==="mounted"?v:"none",!0)}),I(()=>l(i),v=>{if(v)return p(t,getComputedStyle(v),!0),Y(A(v,"animationstart",E),A(v,"animationcancel",m),A(v,"animationend",m))});const y=ve(()=>["mounted","unmountSuspended"].includes(a.current));return{get current(){return l(y)}}}function ye(n){return n&&getComputedStyle(n).animationName||"none"}function dr(n,e){z(e,!0);const t=Jt(h.with(()=>e.present),h.with(()=>e.id));var r=L(),s=F(r);{var i=u=>{var a=L(),c=F(a);G(c,()=>e.presence??j,()=>({present:t})),O(u,a)};nt(s,u=>{(e.forceMount||e.present||t.current)&&u(i)})}O(n,r),q()}function Qt(n,e){var t=L(),r=F(t);Ht(r,()=>e.children,s=>{var i=L(),u=F(i);G(u,()=>e.children??j),O(s,i)}),O(n,t)}function fr(n,e){z(e,!0);let t=w(e,"to",3,"body");const r=Pt();let s=ve(i);function i(){if(!He||e.disabled)return null;let y=null;return typeof t()=="string"?y=document.querySelector(t()):(t()instanceof HTMLElement||t()instanceof DocumentFragment)&&(y=t()),y}let u;function a(){u&&(bt(u),u=null)}I([()=>l(s),()=>e.disabled],([y,v])=>{if(!y||v){a();return}return u=yt(Qt,{target:y,props:{children:e.children},context:r}),()=>{a()}});var c=L(),m=F(c);{var E=y=>{var v=L(),D=F(v);G(D,()=>e.children??j),O(y,v)};nt(m,y=>{e.disabled&&y(E)})}O(n,c),q()}function st(n,e,t,r){const s=Array.isArray(e)?e:[e];return s.forEach(i=>n.addEventListener(i,t,r)),()=>{s.forEach(i=>n.removeEventListener(i,t,r))}}class it{constructor(e,t={bubbles:!0,cancelable:!0}){M(this,"eventName");M(this,"options");this.eventName=e,this.options=t}createEvent(e){return new CustomEvent(this.eventName,{...this.options,detail:e})}dispatch(e,t){const r=this.createEvent(t);return e.dispatchEvent(r),r}listen(e,t,r){const s=i=>{t(i)};return A(e,this.eventName,s,r)}}function Ye(n,e=500){let t=null;const r=(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...s)},e)};return r.destroy=()=>{t!==null&&(clearTimeout(t),t=null)},r}function We(n,e){return n===e||n.contains(e)}function ot(n){return(n==null?void 0:n.ownerDocument)??document}function $t(n,e){const{clientX:t,clientY:r}=n,s=e.getBoundingClientRect();return t<s.left||t>s.right||r<s.top||r>s.bottom}globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);var Q,V,K,$,ee,H,ce,le,_,Se,se,ut,Te,te,Ne,Ae,Ie,Le,de,at,Oe,Fe;class en{constructor(e){d(this,se);M(this,"opts");d(this,Q);d(this,V);d(this,K,{pointerdown:!1});d(this,$,!1);d(this,ee,!1);M(this,"node",h(null));d(this,H);d(this,ce);d(this,le,R(null));d(this,_,N);d(this,Se,e=>{e.defaultPrevented||this.currNode&&ke(()=>{var t,r;!this.currNode||o(this,Le).call(this,e.target)||e.target&&!o(this,ee)&&((r=(t=o(this,ce)).current)==null||r.call(t,e))})});d(this,Te,e=>{let t=e;t.defaultPrevented&&(t=Je(e)),o(this,Q).current(e)});d(this,te,Ye(e=>{if(!this.currNode){o(this,_).call(this);return}const t=this.opts.isValidEvent.current(e,this.currNode)||sn(e,this.currNode);if(!o(this,$)||W(this,se,at).call(this)||!t){o(this,_).call(this);return}let r=e;if(r.defaultPrevented&&(r=Je(r)),o(this,V).current!=="close"&&o(this,V).current!=="defer-otherwise-close"){o(this,_).call(this);return}e.pointerType==="touch"?(o(this,_).call(this),T(this,_,st(o(this,H),"click",o(this,Te),{once:!0}))):o(this,Q).current(r)},10));d(this,Ne,e=>{o(this,K)[e.type]=!0});d(this,Ae,e=>{o(this,K)[e.type]=!1});d(this,Ie,()=>{this.node.current&&T(this,$,rn(this.node.current))});d(this,Le,e=>this.node.current?We(this.node.current,e):!1);d(this,de,Ye(()=>{for(const e in o(this,K))o(this,K)[e]=!1;T(this,$,!1)},20));d(this,Oe,()=>{T(this,ee,!0)});d(this,Fe,()=>{T(this,ee,!1)});M(this,"props",{onfocuscapture:o(this,Oe),onblurcapture:o(this,Fe)});this.opts=e,Ue({id:e.id,ref:this.node,deps:()=>e.enabled.current,onRefChange:s=>{this.currNode=s}}),T(this,V,e.interactOutsideBehavior),T(this,Q,e.onInteractOutside),T(this,ce,e.onFocusOutside),re(()=>{T(this,H,ot(this.currNode))});let t=N;const r=()=>{o(this,de).call(this),globalThis.bitsDismissableLayers.delete(this),o(this,te).destroy(),t()};I([()=>this.opts.enabled.current,()=>this.currNode],([s,i])=>{if(!(!s||!i))return Ke(1,()=>{this.currNode&&(globalThis.bitsDismissableLayers.set(this,o(this,V)),t(),t=W(this,se,ut).call(this))}),r}),Ut(()=>{o(this,de).destroy(),globalThis.bitsDismissableLayers.delete(this),o(this,te).destroy(),o(this,_).call(this),t()})}get currNode(){return l(o(this,le))}set currNode(e){p(o(this,le),e,!0)}}Q=new WeakMap,V=new WeakMap,K=new WeakMap,$=new WeakMap,ee=new WeakMap,H=new WeakMap,ce=new WeakMap,le=new WeakMap,_=new WeakMap,Se=new WeakMap,se=new WeakSet,ut=function(){return Y(A(o(this,H),"pointerdown",Y(o(this,Ne),o(this,Ie)),{capture:!0}),A(o(this,H),"pointerdown",Y(o(this,Ae),o(this,te))),A(o(this,H),"focusin",o(this,Se)))},Te=new WeakMap,te=new WeakMap,Ne=new WeakMap,Ae=new WeakMap,Ie=new WeakMap,Le=new WeakMap,de=new WeakMap,at=function(){return Object.values(o(this,K)).some(Boolean)},Oe=new WeakMap,Fe=new WeakMap;function tn(n){return new en(n)}function nn(n){return n.findLast(([e,{current:t}])=>t==="close"||t==="ignore")}function rn(n){const e=[...globalThis.bitsDismissableLayers],t=nn(e);if(t)return t[0].node.current===n;const[r]=e[0];return r.node.current===n}function sn(n,e){if("button"in n&&n.button>0)return!1;const t=n.target;return Gt(t)?ot(t).documentElement.contains(t)&&!We(e,t)&&$t(n,e):!1}function Je(n){const e=n.currentTarget,t=n.target;let r;n instanceof PointerEvent?r=new PointerEvent(n.type,n):r=new PointerEvent("pointerdown",n);let s=!1;return new Proxy(r,{get:(u,a)=>a==="currentTarget"?e:a==="target"?t:a==="preventDefault"?()=>{s=!0,typeof u.preventDefault=="function"&&u.preventDefault()}:a==="defaultPrevented"?s:a in u?u[a]:n[a]})}function hr(n,e){z(e,!0);let t=w(e,"interactOutsideBehavior",3,"close"),r=w(e,"onInteractOutside",3,N),s=w(e,"onFocusOutside",3,N),i=w(e,"isValidEvent",3,()=>!1);const u=tn({id:h.with(()=>e.id),interactOutsideBehavior:h.with(()=>t()),onInteractOutside:h.with(()=>r()),enabled:h.with(()=>e.enabled),onFocusOutside:h.with(()=>s()),isValidEvent:h.with(()=>i())});var a=L(),c=F(a);G(c,()=>e.children??j,()=>({props:u.props})),O(n,a),q()}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);var De,Ce;class on{constructor(e){M(this,"opts");d(this,De,()=>A(document,"keydown",o(this,Ce),{passive:!1}));d(this,Ce,e=>{if(e.key!==zt||!an(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const r=this.opts.escapeKeydownBehavior.current;r!=="close"&&r!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(t)});this.opts=e;let t=N;I(()=>e.enabled.current,r=>(r&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=o(this,De).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}}De=new WeakMap,Ce=new WeakMap;function un(n){return new on(n)}function an(n){const e=[...globalThis.bitsEscapeLayers],t=e.findLast(([s,{current:i}])=>i==="close"||i==="ignore");if(t)return t[0]===n;const[r]=e[0];return r===n}function vr(n,e){z(e,!0);let t=w(e,"escapeKeydownBehavior",3,"close"),r=w(e,"onEscapeKeydown",3,N);un({escapeKeydownBehavior:h.with(()=>t()),onEscapeKeydown:h.with(()=>r()),enabled:h.with(()=>e.enabled)});var s=L(),i=F(s);G(i,()=>e.children??j),O(n,s),q()}const B=h([]);function cn(){return{add(n){const e=B.current[0];e&&n.id!==e.id&&e.pause(),B.current=Qe(B.current,n),B.current.unshift(n)},remove(n){var e;B.current=Qe(B.current,n),(e=B.current[0])==null||e.resume()},get current(){return B.current}}}function ln(){let n=R(!1),e=R(!1);return{id:rt(),get paused(){return l(n)},get isHandlingFocus(){return l(e)},set isHandlingFocus(t){p(e,t,!0)},pause(){p(n,!0)},resume(){p(n,!1)}}}function Qe(n,e){return[...n].filter(t=>t.id!==e.id)}function dn(n){return n.filter(e=>e.tagName!=="A")}function U(n,{select:e=!1}={}){if(!(n&&n.focus)||document.activeElement===n)return;const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Zt(n)&&e&&n.select()}function fn(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(U(r,{select:e}),document.activeElement!==t)return!0}function $e(n,e){for(const t of n)if(!Xt(t,e))return t}function ct(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function hn(n){const e=ct(n),t=$e(e,n),r=$e(e.reverse(),n);return[t,r]}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var vn=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],mn=vn.join(","),lt=typeof Element>"u",Ee=lt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,we=!lt&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},gn=function n(e,t){var r;t===void 0&&(t=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",u=i||t&&e&&n(e.parentNode);return u},yn=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},bn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pn=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||yn(e))&&!bn(e)?0:e.tabIndex},dt=function(e){return e.tagName==="INPUT"},En=function(e){return dt(e)&&e.type==="hidden"},wn=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Sn=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Tn=function(e){if(!e.name)return!0;var t=e.form||we(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var i=Sn(s,e.form);return!i||i===e},Nn=function(e){return dt(e)&&e.type==="radio"},An=function(e){return Nn(e)&&!Tn(e)},In=function(e){var t,r=e&&we(e),s=(t=r)===null||t===void 0?void 0:t.host,i=!1;if(r&&r!==e){var u,a,c;for(i=!!((u=s)!==null&&u!==void 0&&(a=u.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!i&&s;){var m,E,y;r=we(s),s=(m=r)===null||m===void 0?void 0:m.host,i=!!((E=s)!==null&&E!==void 0&&(y=E.ownerDocument)!==null&&y!==void 0&&y.contains(s))}}return i},et=function(e){var t=e.getBoundingClientRect(),r=t.width,s=t.height;return r===0&&s===0},Ln=function(e,t){var r=t.displayCheck,s=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Ee.call(e,"details>summary:first-of-type"),u=i?e.parentElement:e;if(Ee.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var c=e.parentElement,m=we(e);if(c&&!c.shadowRoot&&s(c)===!0)return et(e);e.assignedSlot?e=e.assignedSlot:!c&&m!==e.ownerDocument?e=m.host:e=c}e=a}if(In(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return et(e);return!1},On=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var s=t.children.item(r);if(s.tagName==="LEGEND")return Ee.call(t,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}t=t.parentElement}return!1},Fn=function(e,t){return!(t.disabled||gn(t)||En(t)||Ln(t,e)||wn(t)||On(t))},Dn=function(e,t){return!(An(t)||pn(t)<0||!Fn(e,t))},Cn=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ee.call(e,mn)===!1?!1:Dn(t,e)};const Pn=new it("focusScope.autoFocusOnMount",{bubbles:!1,cancelable:!0}),xn=new it("focusScope.autoFocusOnDestroy",{bubbles:!1,cancelable:!0}),kn=new Vt("FocusScope");function _n({id:n,loop:e,enabled:t,onOpenAutoFocus:r,onCloseAutoFocus:s,forceMount:i}){const u=cn(),a=ln(),c=h(null),m=kn.getOr({ignoreCloseAutoFocus:!1});let E=null;Ue({id:n,ref:c,deps:()=>t.current});function y(f){if(!(a.paused||!c.current||a.isHandlingFocus)){a.isHandlingFocus=!0;try{const g=f.target;if(!Be(g))return;const b=c.current.contains(g);if(f.type==="focusin")if(b)E=g;else{if(m.ignoreCloseAutoFocus)return;U(E,{select:!0})}else f.type==="focusout"&&!b&&!m.ignoreCloseAutoFocus&&U(E,{select:!0})}finally{a.isHandlingFocus=!1}}}function v(f){if(!E||!c.current)return;let g=!1;for(const b of f){if(b.type==="childList"&&b.removedNodes.length>0)for(const S of b.removedNodes){if(S===E){g=!0;break}if(S.nodeType===Node.ELEMENT_NODE&&S.contains(E)){g=!0;break}}if(g)break}g&&c.current&&!c.current.contains(document.activeElement)&&U(c.current)}I([()=>c.current,()=>t.current],([f,g])=>{if(!f||!g)return;const b=Y(A(document,"focusin",y),A(document,"focusout",y)),S=new MutationObserver(v);return S.observe(f,{childList:!0,subtree:!0,attributes:!1}),()=>{b(),S.disconnect()}}),I([()=>i.current,()=>c.current],([f,g])=>{if(f)return;const b=document.activeElement;return D(g,b),()=>{g&&Z(b)}}),I([()=>i.current,()=>c.current,()=>t.current],([f,g])=>{if(!f)return;const b=document.activeElement;return D(g,b),()=>{g&&Z(b)}});function D(f,g){if(f||(f=document.getElementById(n.current)),!f||!t.current)return;if(u.add(a),!f.contains(g)){const S=Pn.createEvent();r.current(S),S.defaultPrevented||ke(()=>{if(!f)return;fn(dn(ct(f)),{select:!0})||U(f)})}}function Z(f){var S;const g=xn.createEvent();(S=s.current)==null||S.call(s,g);const b=m.ignoreCloseAutoFocus;Ke(0,()=>{!g.defaultPrevented&&f&&!b&&U(Cn(f)?f:document.body,{select:!0}),u.remove(a)})}function me(f){if(!t.current||!e.current&&!t.current||a.paused)return;const g=f.key===qt&&!f.ctrlKey&&!f.altKey&&!f.metaKey,b=document.activeElement;if(!(g&&b))return;const S=c.current;if(!S)return;const[ge,_e]=hn(S);ge&&_e?!f.shiftKey&&b===_e?(f.preventDefault(),e.current&&U(ge,{select:!0})):f.shiftKey&&b===ge&&(f.preventDefault(),e.current&&U(_e,{select:!0})):b===S&&f.preventDefault()}const ze=ve(()=>({id:n.current,tabindex:-1,onkeydown:me}));return{get props(){return l(ze)}}}function mr(n,e){z(e,!0);let t=w(e,"trapFocus",3,!1),r=w(e,"loop",3,!1),s=w(e,"onCloseAutoFocus",3,N),i=w(e,"onOpenAutoFocus",3,N),u=w(e,"forceMount",3,!1);const a=_n({enabled:h.with(()=>t()),loop:h.with(()=>r()),onCloseAutoFocus:h.with(()=>s()),onOpenAutoFocus:h.with(()=>i()),id:h.with(()=>e.id),forceMount:h.with(()=>u())});var c=L(),m=F(c);G(m,()=>e.focusScope??j,()=>({props:a.props})),O(n,c),q()}globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);var ne,fe,Pe,ft,xe,he;class Rn{constructor(e){d(this,Pe);M(this,"opts");d(this,ne,N);d(this,fe,h(null));d(this,xe,e=>{const t=o(this,fe).current,r=e.target;!Be(t)||!Be(r)||!this.opts.enabled.current||!Un(this)||!We(t,r)||(this.opts.onPointerDown.current(e),!e.defaultPrevented&&T(this,ne,Bn(t)))});d(this,he,()=>{o(this,ne).call(this),T(this,ne,N)});this.opts=e,Ue({id:e.id,ref:o(this,fe),deps:()=>this.opts.enabled.current});let t=N;I(()=>this.opts.enabled.current,r=>(r&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=W(this,Pe,ft).call(this)),()=>{t(),o(this,he).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}}ne=new WeakMap,fe=new WeakMap,Pe=new WeakSet,ft=function(){return Y(A(document,"pointerdown",o(this,xe)),A(document,"pointerup",Kt(o(this,he),this.opts.onPointerUp.current)))},xe=new WeakMap,he=new WeakMap;function Mn(n){return new Rn(n)}const tt=n=>n.style.userSelect||n.style.webkitUserSelect;function Bn(n){const e=document.body,t=tt(e),r=tt(n);return be(e,"none"),be(n,"text"),()=>{be(e,t),be(n,r)}}function be(n,e){n.style.userSelect=e,n.style.webkitUserSelect=e}function Un(n){const e=[...globalThis.bitsTextSelectionLayers];if(!e.length)return!1;const t=e.at(-1);return t?t[0]===n:!1}function gr(n,e){z(e,!0);let t=w(e,"preventOverflowTextSelection",3,!0),r=w(e,"onPointerDown",3,N),s=w(e,"onPointerUp",3,N);Mn({id:h.with(()=>e.id),preventOverflowTextSelection:h.with(()=>t()),onPointerDown:h.with(()=>r()),onPointerUp:h.with(()=>s()),enabled:h.with(()=>e.enabled)});var i=L(),u=F(i);G(u,()=>e.children??j),O(n,i),q()}function Kn(n){let e=0,t=R(void 0),r;function s(){e-=1,r&&e<=0&&(r(),p(t,void 0),r=void 0)}return(...i)=>(e+=1,l(t)===void 0&&(r=xt(()=>{p(t,n(...i),!0)})),re(()=>()=>{s()}),l(t))}const Hn=Kn(()=>{const n=new Me,e=ve(()=>{for(const i of n.values())if(i)return!0;return!1});let t=R(null),r=null;function s(){He&&(document.body.setAttribute("style",l(t)??""),document.body.style.removeProperty("--scrollbar-width"),Xe&&(r==null||r()))}return re(()=>{const i=l(e);return kt(()=>{if(!i)return;p(t,document.body.getAttribute("style"),!0);const u=getComputedStyle(document.body),a=window.innerWidth-document.documentElement.clientWidth,m={padding:Number.parseInt(u.paddingRight??"0",10)+a,margin:Number.parseInt(u.marginRight??"0",10)};a>0&&(document.body.style.paddingRight=`${m.padding}px`,document.body.style.marginRight=`${m.margin}px`,document.body.style.setProperty("--scrollbar-width",`${a}px`),document.body.style.overflow="hidden"),Xe&&(r=st(document,"touchmove",E=>{E.target===document.documentElement&&(E.touches.length>1||E.preventDefault())},{passive:!1})),ke(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})})}),re(()=>()=>{r==null||r()}),{get map(){return n},resetBodyStyle:s}});function Wn(n,e=()=>null){const t=rt(),r=Hn();if(!r)return;const s=ve(e);r.map.set(t,n??!1);const i=h.with(()=>r.map.get(t)??!1,u=>r.map.set(t,u));return re(()=>()=>{r.map.delete(t),!Vn(r.map)&&(l(s)===null?requestAnimationFrame(()=>r.resetBodyStyle()):Ke(l(s),()=>r.resetBodyStyle()))}),i}function Vn(n){for(const[e,t]of n)if(t)return!0;return!1}function yr(n,e){z(e,!0);let t=w(e,"preventScroll",3,!0),r=w(e,"restoreScrollDelay",3,null);Wn(t(),()=>r()),q()}export{nr as A,Vt as C,hr as D,rr as E,mr as F,ir as H,Qn as P,ar as S,gr as T,tr as a,er as b,$n as c,sr as d,dr as e,vr as f,yr as g,fr as h,He as i,ke as j,st as k,lr as l,qt as m,ur as n,or as o,Wt as p,Xe as q,Ke as r,cr as s,Me as t,Yt as u};
